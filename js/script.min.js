"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}!function(){var f={MAX_WIDTH_768PX:window.matchMedia("(max-width: 768px)"),body:document.body,wrapper:document.querySelector(".wrapper"),header:document.querySelector(".header"),headerWrapper:document.querySelector(".header__wrapper"),headerRow:document.querySelector(".header__row"),burger:document.querySelector(".burger"),navHeader:document.querySelector(".nav-header"),forms:document.forms,lockPaddingItems:document.querySelectorAll(".lock-padding"),lazyImages:document.querySelectorAll(".lazy-image")},e=new IntersectionObserver(function(t,o){t.forEach(function(t){var e,n=t.target,a=n.querySelector("img"),r=n.querySelectorAll("source"),i=n.querySelector(".lazy-image__preloader");t.isIntersecting&&(a.hasAttribute("data-src")&&(a.src=a.dataset.src,a.removeAttribute("data-src")),r.length&&r.forEach(function(t){t.hasAttribute("data-srcset")&&(t.srcset=t.dataset.srcset,t.removeAttribute("data-srcset"))}),i&&(e=setInterval(function(){a.complete&&(n.classList.remove("lazy-image"),i.remove(),clearInterval(e))},100)),o.unobserve(n))})});function n(t){var e=!(0<arguments.length&&void 0!==t)||t?window.innerWidth-f.wrapper.offsetWidth+"px":"";f.body.style.paddingRight=e,f.lockPaddingItems.length&&f.lockPaddingItems.forEach(function(t){t.style.paddingRight=e})}function h(t){t=0<arguments.length&&void 0!==t?t:"toggle";f.burger&&(f.burger.classList[t]("active"),f.header&&f.header.classList[t]("active"),f.navHeader&&f.navHeader.classList[t]("active"),f.burger.classList.contains("active")?n():n(!1),f.body.classList[t]("lock"))}var a,r,i,b=document.querySelector(".cart-btn"),o=document.querySelectorAll('[class*="btns-"][class*="__btn"][data-search-filter]'),c=f.forms["form-user"],s=f.forms["form-admin"];function y(t,e){var n;o.length&&o.forEach(function(t){t.classList.contains("active")&&t.classList.remove("active")}),t.classList.add("active"),c&&(n=c.querySelector(".form-user__title"),t=t.innerHTML.split(" ")[0],n.innerHTML="".concat(t," Search").concat("id"===e?" by ID":""))}function v(e,n){var t;c&&("id"===e?l():l(!1)),s&&("update authority"===(n=n.innerHTML)&&(n="update"),t='\n\t\t\t<div class="form-admin__input">\n\t\t\t<input type="text" id="id" name="id" placeholder="ID">\n\t\t\t</div>\n\t\t\t<button type="submit" class="form-admin__btn">'.concat("update"===n?"search":n,"</button>"),"create"===n?(d(n,e),s.onsubmit=""):"update"===n?(s.innerHTML=t,s.onsubmit=function(t){t.preventDefault(),d(n,e),s.onsubmit=""}):(s.innerHTML=t,s.onsubmit=""))}function l(t){t=!(0<arguments.length&&void 0!==t)||t;a.placeholder=t?"ID":"Key",r.hidden=t,i.hidden=t,r.disabled=t,i.disabled=t}function d(t,e){var n;switch(s.innerHTML="",e){case"book":n='\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="authors" name="authors" placeholder="Authors">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="category" name="category" placeholder="Category">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="name" name="name" placeholder="Name">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="page" name="page" placeholder="Page">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="title" name="title" placeholder="Title">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-admin__textarea">\n\t\t\t\t\t<textarea id="description" name="description" placeholder="Description"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<button type="submit" class="form-admin__btn">'.concat(t,"</button>");break;case"author":n='\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="age" name="age" placeholder="Age">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="firstname" name="firstname" placeholder="First name">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="lastname" name="lastname" placeholder="Last name">\n\t\t\t\t</div>\n\t\t\t\t<button type="submit" class="form-admin__btn">'.concat(t,"</button>");break;case"category":n='\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="name" name="name" placeholder="Name">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-admin__textarea">\n\t\t\t\t\t<textarea id="description" name="description" placeholder="Description"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<button type="submit" class="form-admin__btn">'.concat(t,"</button>");break;case"user":n='\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="authority" name="authority" placeholder="Authority">\n\t\t\t\t</div>\n\t\t\t\t<button type="submit" class="form-admin__btn">'.concat(t,"</button>");break;default:n='\n\t\t\t\t<div class="form-admin__input">\n\t\t\t\t\t<input type="text" id="id" name="id" placeholder="ID">\n\t\t\t\t</div>\n\t\t\t\t<button type="submit" class="form-admin__btn">'.concat(t,"</button>")}s.insertAdjacentHTML("afterbegin",n)}c&&(a=c.key,r=c.operation,i=c.value),s&&s.innerHTML;var t=f.forms["form-create"],u=document.querySelector(".popup-create");document.addEventListener("click",function(t){var e,n,a,r,i,o,c,s,l,d,u,p,m;t.target.closest(".burger")&&h(),t.target.closest('[class*="btns-"][class*="__btn"]')&&!t.target.closest(".active")&&(p=(u=t).target.closest('[class*="btns-"][class*="__btn"]'),u=u.target.closest('[class*="btns-"][class*="__btns"]'),m=u.dataset.search,p.hasAttribute("data-search-filter")&&(y(p,m),v(m,p)),p.hasAttribute("data-search-type")&&(p=u.querySelector("[data-search-filter]"),u=u.querySelectorAll("[data-search-filter]"),Array.from(u).some(function(t){return t.classList.contains("active")})||(y(p,m),v(m,p)))),t.target.closest(".form-sign-in__checkbox label")&&(u=t,(m=f.forms["form-sign-in"])&&(u=u.target.closest(".form-sign-in__checkbox").querySelector("input"),m.password.type=u.checked?"text":"password")),t.target.closest(".books__btn")&&((p=t).preventDefault(),console.log(p),0<=p.pointerId&&(p=p.target.closest(".books__item"),e=b.getBoundingClientRect().top,n=b.getBoundingClientRect().left,a=b.getBoundingClientRect().width,r=b.getBoundingClientRect().height,i=(p=p.querySelector(".books__image-ibg img")).getBoundingClientRect().top,o=p.getBoundingClientRect().left,c=p.getBoundingClientRect().width,s=p.getBoundingClientRect().height,p=p.src,(l=document.createElement("img")).src=p,l.style.cssText="\n\t\tposition: fixed;\n\t\ttop: ".concat(i,"px;\n\t\tleft: ").concat(o,"px;\n\t\tz-index: 5;\n\t\twidth: ").concat(c,"px;\n\t\theight: ").concat(s,"px;\n\t\topacity: 1;\n\t\ttransition: 0.5s linear;\n\t"),f.body.insertAdjacentElement("afterbegin",l),d=setTimeout(function(){l.style.cssText="\n\t\t\tposition: fixed;\n\t\t\ttop: ".concat(0<e?e:-r,"px;\n\t\t\tleft: ").concat(n,"px;\n\t\t\tz-index: 5;\n\t\t\twidth: ").concat(a,"px;\n\t\t\theight: ").concat(r,"px;\n\t\t\topacity: 0;\n\t\t\ttransition: 0.5s linear;\n\t\t"),l.addEventListener("transitionend",function(){l.remove(),clearTimeout(d)})},1))),t.target.closest("[data-goto]")&&(o=(i=t).target.closest("[data-goto]"),o=document.querySelector(o.dataset.goto),console.log(f.headerWrapper),o&&(o=o.getBoundingClientRect().top+window.scrollY-(f.headerWrapper?f.headerWrapper.offsetHeight:0),f.burger.classList.contains("active")&&h("remove"),window.scrollTo({top:o,behavior:"smooth"})),i.preventDefault())}),f.MAX_WIDTH_768PX.addEventListener("change",function(t){t.matches||h("remove")}),f.lazyImages.length&&f.lazyImages.forEach(function(t){e.observe(t)}),t&&t.addEventListener("submit",function(t){var e;t.preventDefault(),u&&(u.classList.add("show"),e=setTimeout(function(){u.classList.remove("show"),clearTimeout(e)},2e3))}),new(function(){function e(t){_classCallCheck(this,e),this.type=t}return _createClass(e,[{key:"init",value:function(){var r=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=_toConsumableArray(document.querySelectorAll("[data-da]")),this.nodes.forEach(function(t){var e=t.dataset.da.trim().split(","),n={};n.element=t,n.parent=t.parentNode,n.destination=document.querySelector("".concat(e[0].trim())),n.breakpoint=e[1]?e[1].trim():"767",n.place=e[2]?e[2].trim():"last",n.index=r.indexInParent(n.parent,n.element),r.оbjects.push(n)}),this.arraySort(this.оbjects),this.mediaQueries=this.оbjects.map(function(t){t=t.breakpoint;return"(".concat(r.type,"-width: ").concat(t,"px),").concat(t)}).filter(function(t,e,n){return n.indexOf(t)===e}),this.mediaQueries.forEach(function(t){var t=t.split(","),e=window.matchMedia(t[0]),n=t[1],a=r.оbjects.filter(function(t){return t.breakpoint===n});e.addEventListener("change",function(){r.mediaHandler(e,a)}),r.mediaHandler(e,a)})}},{key:"mediaHandler",value:function(t,e){var a=this;t.matches?e.forEach(function(t){t.index=a.indexInParent(t.parent,t.element),a.moveTo(t.place,t.element,t.destination)}):e.forEach(function(t){var e=t.parent,n=t.element,t=t.index;n.classList.contains(a.daClassname)&&a.moveBack(e,n,t)})}},{key:"moveTo",value:function(t,e,n){e.classList.add(this.daClassname),"last"===t||t>=n.children.length?n.append(e):"first"!==t?n.children[t].before(e):n.prepend(e)}},{key:"moveBack",value:function(t,e,n){e.classList.remove(this.daClassname),void 0!==t.children[n]?t.children[n].before(e):t.append(e)}},{key:"indexInParent",value:function(t,e){return _toConsumableArray(t.children).indexOf(e)}},{key:"arraySort",value:function(t){"min"===this.type?t.sort(function(t,e){return t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?-1:"last"===t.place||"first"===e.place?1:t.place-e.place:t.breakpoint-e.breakpoint}):t.sort(function(t,e){return t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?1:"last"===t.place||"first"===e.place?-1:e.place-t.place:e.breakpoint-t.breakpoint})}}]),e}())("max").init()}();